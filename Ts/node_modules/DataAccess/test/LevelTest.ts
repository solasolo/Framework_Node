import { LevelStore as Level } from 'DataAccess';
import { GUID } from 'CommonUtils';
import { DefaultThen } from 'TestToolkit';

var level = new Level(__dirname + "/../tmp/");

//console.log(level.Info());

const key = GUID.New32();

async function Test() {
    await level.Put(key, 'Hello World:' + Date());
    console.log(await level.Get(key));
    await level.Delete(key);
    console.log(await level.Get(key));

    let obj = Object.create(null); 
    obj[key + 'a'] = "I'm a";
    obj[key + 'b'] = "I'm b";
    obj[key + 'c'] = "I'm c";

    await level.Put(key, obj);

    let ret = await level.PrefixGet(key);
    console.log(ret);
}

async function LongTest() {
    for (let i = 0; i < 100000; i++) {
        let key = GUID.New32();
        await level.Put(key, 'Hello World:' + Date());
        await level.Get(key);
        await level.Delete(key);
    }
}


ts.DefaultThen(Test());
//ts.DefaultThen(LongTest());
