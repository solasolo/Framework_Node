import { AppRoot } from 'CommonUtils';
AppRoot(__dirname + '/../../..');

import { DefaultThen } from 'TestToolkit';
import { SysLogger } from 'Logger';

import { WeixinPay } from '../lib/weixin_pay';

SysLogger.Append(['Console']);

let keys = {

};

let pay = new WeixinPay(keys);

const data = {
    "appid": "wxf8ba4e4555d13334",
    "mch_id": "1409124402",
    "goods_tag": "helloworld"
};

const xml: string = "<xml><ToUserName><![CDATA[toUser]]></ToUserName><FromUserName><![CDATA[fromUser]]></FromUserName><CreateTime>1348831860</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[this  is  a  test]]></Content><MsgId>1234567890123456</MsgId></xml>";

// console.log(pay.Signature(data));
// console.log(data);
// console.log(pay.ToXML(data));

// Facility.DefaultThen(pay.ToObject(xml));
// Facility.DefaultThen(pay.Declare('1234567890'));
let transaction_id = "123456";

DefaultThen(pay.DeclareQuery(transaction_id));

