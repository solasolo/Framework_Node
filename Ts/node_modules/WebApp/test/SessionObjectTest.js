const { SessionFactory } = require('../lib/Session/SessionObject');
const { GUID } = require('CommonUtils');

let session = SessionFactory.Create(GUID.New32());

session.a = 'abc';
session.b = 123;
Show("empty");

session = SessionFactory.Create((GUID.New32()), {
    a: 12,
    b: 'ab'
});
Show("new");

session.b = 789;
session.b = 'ab';
Show("edit 2");

session.b = 789;
Show("edit 1");


function Show(s) {
    console.log(s);
    console.log(session.ID);
    console.log(JSON.stringify(session._NEW_));
    console.log(JSON.stringify(session._FULL_));

    let keys = Object.keys(session);
    console.log(keys);

    for (let k of keys) {
        console.log(k, session[k]);
    }
}